
input = <<-HTML
  <!DOCTYPE html>
  <html lang="en">
  	<head>
  		<meta charset="utf-8">
  		<title>Desk.com &mdash; The Social Help Desk</title>
  		<meta name="description" content="Customer Support Software by Desk.com. Improve your support and deliver awesome customer service. Get one Full-Time Agent seat for Free and try it now!"/>
  		<meta name="google-site-verification" content="TnuKaCr7NpVSleY2SB-8bmTU_64LiNEhoStlGUfhLiU"/>
      <meta name="msvalidate.01" content="4D9ACBEECCE43BF7E6AC9814C84A73D2"/>
  		<meta name="y_key" content="5254589caf6bd2bc"/>
  		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="http://webassets.desk.com/new/javascripts/jquery.cookie-modified.js"></script>
  <script type="text/javascript" src="http://webassets.desk.com/new/javascripts/jquery.colorbox-min.js"></script>
  <script type="text/javascript" src="http://webassets.desk.com/new/javascripts/jquery.blockUI.js"></script>
  <script type="text/javascript" src="http://webassets.desk.com/new/javascripts/detect_timezone.js"></script>
  <script type="text/javascript" src="http://webassets.desk.com/new/javascripts/jquery.alphanumeric.js"></script>
  <script type="text/javascript" src="http://webassets.desk.com/new/javascripts/deskanalytics.js"></script>
  <script type="text/javascript" src="http://webassets.desk.com/new/javascripts/jquery.desk.signup.js"></script>
  <script type="text/javascript" src="http://webassets.desk.com/new/javascripts/siteHelpers_v2.js"></script>
  <script type="text/javascript" src="http://webassets.desk.com/new/javascripts/assistlycustomevents.js"></script>
  <script type="text/javascript" src="http://webassets.desk.com/new/javascripts/assistlyfooterlinkoverlay.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300&v2' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:700&v2' rel='stylesheet' type='text/css'/>
  <link rel="stylesheet" type="text/css" media="all" href="http://webassets.desk.com/new/stylesheets/reset.css"/>
  <link rel="stylesheet" type="text/css" media="all" href="http://webassets.desk.com/new/stylesheets/960.css"/>
  <link rel="stylesheet" type="text/css" media="all" href="http://webassets.desk.com/new/stylesheets/text.css"/>
  <link rel="stylesheet" type="text/css" media="all" href="http://webassets.desk.com/new/stylesheets/layout.css"/>
  <link rel="stylesheet" type="text/css" media="all" href="http://webassets.desk.com/new/stylesheets/colorbox.css"/>
  <link rel="stylesheet" type="text/css" media="all" href="http://webassets.desk.com/new/stylesheets/assistlyv2_1.1.css"/>
  <link rel="stylesheet" type="text/css" media="all" href="http://webassets.desk.com/new/stylesheets/desk-overrides.css"/>
  <!--[if lt IE 9]>
  	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script type="text/javascript">$(function(){if(readCookie('Referer')==null){createCookie('Referer',document.referrer,30,'desk.com');}});</script>

  <script type="text/javascript" src="http://webassets.desk.com/new/javascripts/desk.js"></script>

  <script src="//cdn.optimizely.com/js/25021779.js"></script>
  <!-- Facebook Meta -->
  <meta property="og:site_name" content="Desk.com"/>
  <meta property="og:title" content="Desk.com"/>
  <meta property="og:description" content="Have you seen the new Desk.com? #getdesk"/>
  <meta property="fb:admins" content="649512187"/>
  <meta property="fb:app_id" content="310558602306902"/>
  <meta property="og:image" content="http://webassets.assistly.com/new/images/desk-app-icon.png"/>
  <meta property="og:type" content="website"/>	</head>
  	<body id="a-homepage-new">
  		<header>
  	<nav>
  		<div class="container_16">
  			<ul class="clearfix">
  				<li class="a-home">
  					<a href="/">Desk.com Customer Support Home</a>
  				</li>
  				<li class="a-last">
  					<a href="blog">Blog</a>
  					/
  					<a href="http://support.desk.com/">Help</a>
  					/
  					<script type="text/javascript">generateLoginLink();</script>
  				</li>
  				<li>
  					<a href="register?ss=home&amp;st=navbar" class="a-button">Get Started</a>
  				</li>
  				<li>
  					<a href="pricing">Pricing</a>
  				</li>
  				<li>
  					<a href="customers">Customers</a>
  				</li>
  				<li>
  					<!--<a href="/product" >Take A Tour</a>-->
  					<a href="product">Features</a>
  				</li>
  				<li>
  					<a href="why-desk">Why Desk.com?</a>
  				</li>
  			</ul>
  		</div>
  	</nav>
  </header>		<section id="a-banner">
  			<div class="a-top">
  				<div class="a-pitch">

            <div class="container_16 clearfix">
              <h1><div style="text-transform: none;">The simple, social, mobile, affordable</div><strong style="text-transform:uppercase;">CUSTOMER SUPPORT<br/>HELP&nbsp;DESK</strong></h1>

              <div class="a-bottom">
                <div class="grid_7 a-double">
                  <a href="register" class="a-button a-big">Get started now</a><span>or</span><a href="product" class="a-button a-button-secondary a-big">Take the tour</a>
                </div>
              </div>

            </div>

  				</div><!-- .a-pitch -->
  			</div><!-- .a-top -->


  			<div class="container_16 clearfix secondary">
  				<!--<div class="grid_6 alpha a-quote">
  					<h4 class="a-capdot"><span>What Our Customers Are Saying</span></h4>
  					<p>
  						<span class="a-quote-text">"Desk.com has been a game-changer for us&mdash;We didn't really have a way to scale the customer experience before Desk.com"</span>
  						<span class="a-title">
  							<img src="http://webassets.desk.com/new/images/a-quote-bonobos.jpg" />
  							<b>Andy Dunn</b> <br />CEO &amp; Co-Founder <br />Bonobos
  						</span>
  					</p>
  				</div>-->
  				<div class="grid_6 alpha a-newfeat" style="height: 280px; padding: 50px 0;">
  				  <h4 class="a-capdot"><span>What's New</span></h4>
  				  <a href="features/multilingual"><img src="http://webassets.desk.com/new/images/multilingual-thumb.jpg" style="display: block; margin: 0 0 12px 12px; float: right;" alt=""/></a>
  				  <h4>Say Hello <small>to Multilingual Customer Support</small></h4>
  				  <p>Companies that support a worldwide market need a solution to manage their support communications. Now there is one. With Multilingual Customer Support, you can support your customers in a language they understand.</p>
  				  <p><a href="features/multilingual">Learn More &rarr;</a></p>

  				</div>

  				<div class="grid_10 omega a-videos">
  					<h4 class="a-capdot"><span>Check Out The Desk.com Videos</span></h4>
  					<div class="grid_3 alpha">
  						<img src="http://webassets.desk.com/new/images/a-video-thumb-1.gif" data-track="demo"/>
  						<strong>How It Works</strong>
  						<p>Learn more about the Desk.com product<br/>&nbsp;</p>
  						<a href="http://www.youtube.com/embed/gFEbcDojo1A?rel=0&controls=0&modestbranding=1&showinfo=0&hd=1" class="a-button a-button-secondary" rel="youtubepop" data-track="stocktwits">Play Video</a>
  					</div>
  					<div class="grid_3">
  						<img src="http://webassets.desk.com/new/images/a-video-thumb-5.gif" data-track="assistly-speaks"/>
  						<strong>Customer Story</strong>
  						<p>Bonobos delivers Customer WOW with Desk.com</p>
  						<a href="http://www.youtube.com/embed/BTs0xfQyBlU?rel=0&controls=0&modestbranding=1&showinfo=0&hd=1" class="a-button a-button-secondary" rel="youtubepop" data-track="stocktwits">Play Video</a>
  					</div>
  					<div class="grid_3 omega">
  						<img src="http://webassets.desk.com/new/images/a-video-thumb-4.gif" data-track="stocktwits"/>
  						<strong>Customer Story</strong>
  						<p>iHeartRadio transformed support with Desk.com<br/>&nbsp;</p>
  						<a href="http://www.youtube.com/embed/VyOkygwiRDM?rel=0&controls=0&modestbranding=1&showinfo=0&hd=1" class="a-button a-button-secondary" rel="youtubepop" data-track="stocktwits">Play Video</a>
  					</div>
  				</div>
  			</div>

  			<div class="clearfix"></div>
  		</section>
  		<section id="a-content">
  			<div class="container_16 clearfix">
  				<div class="grid_10 alpha a-table">
  					<h4 class="a-capdot"><span>Finally! Simple &amp; Honest Pricing</span></h4>
  					<ul class="clearfix">
  						<li class="a-first clearfix">
  							<div class="a-price">
  								<span>$</span>0
  							</div>
  							<div class="a-deets">
  								<strong>Your first Full-Time Agent is always free.</strong>
  								All the features &amp; benefits of Desk.com with no commitments.
  							</div>
  						</li>
  						<li class="a-second clearfix">
  							<div class="a-price">
  								<span>$</span>1
  							</div>
  							<div class="a-deets">
  								<strong>Per hour for every additional Flex (Part-Time) Agent</strong>
  								Add optional Flex Agents by the hour as you need them.
  							</div>
  						</li>
  						<li class="a-third clearfix">
  							<div class="a-price">
  								<span>$</span>49
  							</div>
  							<div class="a-deets">
  								<strong>Per month for every additional Full-Time Agent</strong>
  								Add additional Full-Time Agents with unlimited usage.
  							</div>
  						</li>
  					</ul>
  					<p class="a-foot">No credit cards required. Try it for free. <a href="register" class="a-button">Get Started!</a></p>
  				</div>
  				<div class="grid_6 omega">
  					<h4 class="a-capdot"><span>You're In Good Company</span></h4>
  					<a href="customers" title="Customers"><img src="http://webassets.desk.com/new/images/new/customers.png"/></a>
  				</div>
  			</div>

  			<div class="clearfix"></div><!-- IE8 Float Fix -->

  		</section>

  		<section id="a-news">

  			<div class="container_16 clearfix">
  				<div class="clearfix a-publication">
  					<div class="grid_6">
  						<h4 class="a-capdot"><span>Featured In</span></h4>
  					 <img src="http://webassets.desk.com/new/images/featured-in.jpg"/>

  					</div>

  					<div class="push_1 grid_9">
  						<h4 class="a-capdot"><span>Compare Desk.com to Zendesk</span></h4>
  						<div class="a-book" style="min-height:300px">
  							<span class="sneakpeek"></span>
  							<img style="transform: rotate(2deg); -webkit-transform: rotate(2deg); -moz-transform: rotate(2deg);" id="crm-idol" src="http://webassets.desk.com/new/images/zendesk-compare.jpg"/>
  							<p style="padding-top: 30px;">Desk.com's pricing, features, and simplicity makes the decision to move over from Zendesk an easy one. Find out why businesses are making the switch to Desk.com.</p>
  							<p>Learn about the <a href="help-desk/comparison/zendesk-alternative">Zendesk Alternative</a>.</p>
  							<p class="a-getbook">
  								<a href="help-desk/comparison/zendesk-alternative" class="a-button a-button-white">Check out the details</a>
  							</p>
  						</div>
  					</div>
  				</div>
  		  </div>

  			<div class="container_16 clearfix">
  				<div class="clearfix a-publication">
  					<div class="grid_9">
  						<h4 class="a-capdot"><span>No Help Desk Software </span></h4>
  						<div class="a-book" style="min-height:300px;background: none">
  							<span class="sneakpeek"></span>
  							<a href="help-desk/software"><img id="crm-idol" src="http://webassets.desk.com/new/images/no-software.jpg"/></a>
  							<p style="padding-top: 30px;">Today's <a href="help-desk/software">help desk software</a> is not software as you know it, but sits in the cloud. Learn the importance of having a cloud-based help desk that provides simple, mobile, and social customer support. </p>
  							<p class="a-getbook">
  								<a href="help-desk/software" class="a-button a-button-white">Learn more</a>
  							</p>
  						</div>
  					</div>
  					<div class="grid_6 push_1">
  						<h4 class="a-capdot"><span>We're Hiring!</span></h4>
  						<p>We're in search of the brightest of minds and personalities to build the future of customer service. Could it be you?</p>
  					  <div class="clearfix" style="height: 100px; overflow: hidden;">
  					     <ul>
      <li><a href="careers/ruby-on-rails-engineer">Ruby on Rails Engineer</a></li>
      <li><a href="careers/senior-business-development-manager">Senior Business Development Manager</a></li>
      <li><a href="careers/marketing-art-director">Senior Web Designer &amp;&nbsp;Art&nbsp;Director</a></li>
      <li><a href="careers/program-manager">Technical Program Manager, Director</a></li>
      <li><a href="careers/systems-engineer">Senior System Administrator</a></li>
      <li><a href="careers/ui-developer">Front-End UI Engineer</a></li>
      <li><a href="careers/qa-engineer">Quality Assurance Engineer</a></li>
      <li><a href="careers/customer-service-rep">Technical Support Engineer</a></li>
      <li><a href="careers/inside-sales-associate">Inside Sales Associate</a></li>

      <li><a href="careers/sales-engineer">Sales Engineer</a></li>
      <li><a href="careers/technical-wow-consult">Technical WOW Consultant</a></li>
      <li><a href="careers/business-wow-consult">Business WOW Consultant</a></li>

      <li><a href="careers/senior-product-manager">Senior Product Manager</a></li>

      <!--

      <li><a href="/careers/customer-wow-engineer">Customer Wow Engineer</a></li>

      <li>
      <a href="/careers/senior-manager-sales">Sr. Manager, Sales Strategy &amp; Operations</a>
      </li>

      <li>
      <a href="/careers/business-development-manager">Business Development Manager</a>
      </li>

      <li>
      <a href="/careers/manager-of-email-marketing-operations">Manager of Email Marketing and Operations</a>
      </li>

      <li>
      <a href="/careers/director-integrations">Director, Integrations</a>
      </li>
      <li>
      <a href="/careers/social-marketing">Social Marketing, Events and Video Manager</a>
      </li>

      <li>
      <a href="/careers/senior-designer-developer">UX Marketing Designer</a>
      </li>
      <li>
      <a href="/careers/director-network-operations">Director of Network Operations</a>
      </li>

      <li>
      <a href="/careers/product-manager">Product Manager</a>
      </li>
      <li>
      <a href="/careers/ui-designer">UI Designer</a>
      </li>
      <li>
      <a href="/careers/mysql-dba">MySQL DBA / Systems Engineer</a>
      </li>
      <li>
      <a href="/careers/technical-recruiter">Technical Recruiter</a>
      </li>
      -->
    </ul>
  					  </div>
    					<p><a href="careers" class="a-button a-button-white">Browse Jobs</a></p>
  					</div>
  				</div>
  		  </div>

  			<div class="container_16 clearfix">
  				<h4 class="grid_16 a-capdot"><span>Customer Service Beyond the Help Desk</span></h4>

  				<div class="grid_4 happening-now">
  					<img src="http://webassets.desk.com/new/images/a-news-friendship.jpg"/>
  					<strong><a href="blog/beginning-beautiful-friendship/">The Beginning of a Beautiful Friendship</a></strong>
  					<p>How to keep that warm fuzzy feeling that makes a customer relationship stay loyal and rewarding. Once trust is lost, it's hard to recapture, so it's best to avoid doing things that tax that trust.</p>
  					<p><a href="blog/beginning-beautiful-friendship/">Read the article</a></p>
  				</div>

  				<div class="grid_4 happening-now">
  					<img src="http://webassets.desk.com/new/images/a-news-vw.jpg"/>
  					<strong><a href="blog/edelman/">Edelman Drives VW's Success with Desk.com</a></strong>
  					<p>The world's largest independent global PR firm is setting new trends using Desk.com as the way to build VolksWagen of America's social media properties.</p>
  					<p>Read the blog <a href="blog/edelman/">post.</a></p>
  				</div>

  				<div class="grid_4 happening-now">
  					<img src="http://webassets.desk.com/new/images/a-news-presshat.jpg"/>
  					<strong><a href="blog/brand-journalism/">Gain a Competitive Advantage from Brand Journalism</a></strong>
  					<p>Honest storytelling about your brand invites the audience to participate.  Brand journalism pushes content to customers, fans, and influencers with facts, not fluff!</p>
   <p>Read the blog <a href="blog/brand-journalism/">post</a>.</p>
  				</div>

  				<div class="grid_4 happening-now">
  					<img src="http://webassets.desk.com/new/images/a-news-ccclean.jpg"/>
  					<strong><a href="blog/desk-community-effort/">Customer Service Beyond the Help Desk</a></strong>
  					<p>The Desk.com team and Playworks SF spend a day brightening up a San Francisco school playground.</p>
  					<p><a href="blog/desk-community-effort/">Read the article</a></p>
  				</div>

  			</div>
  		</section>
  		<footer>
  	<div class="container_12 clearfix">
  		<div class="clearfix">
  			<ul class="grid_2">
  				<li>
  					<strong><a href="/" title="Home">Desk.com</a></strong>
  					<a href="/" title="Home">Home</a>
  				</li>
  				<li>
  					<a href="why-desk" title="Why Desk.com?">Why Desk.com?</a>
  				</li>
  				<li>
  					<a href="register?ss=home&amp;st=footer" title="Get Started">Get Started Free</a>
  				</li>
  				<li>
  					<a href="about" title="About">About</a>
  				</li>
  				<li>
  					<a href="customers" title="Customers">Customers</a>
  				</li>
  				<li>
  					<a href="careers" title="Careers">Careers</a>
  				</li>
  			</ul>
  			<ul class="grid_2">
  		    <li><strong><a href="product" title="Tour">Features</a></strong>
  		    <a href="features/case-management">Case Management</a></li>
    <li><a href="features/super-fast-setup">Easy Set-Up</a></li>

    <li><a href="features/multi-channel-support">Multi-Channel</a></li>
    <li><a href="features/support-center">Support Center</a></li>
    <li><a href="features/mobile">Mobile Agent</a></li>
          <li><a href="features/reporting">Business Insights</a></li>
          <li><a href="features/knowledge-base">Knowledge Base</a></li>
          <li><a href="features/multilingual">Multilingual</a></li>
  			</ul>
  			<ul class="grid_2">
  				<li>
  					<strong><a href="http://support.desk.com" title="Support Center">Support</a></strong>
  					<a href="http://support.desk.com" title="Support Center">Help Center</a>
  				</li>
  				<li>
  					<a href="http://dev.desk.com" title="API">API</a>
  				</li>
  				<!--<li>
  					<a href="http://status.desk.com" title="System Status">System Status</a>
  				</li>-->
  				<li>
  					<a href="trust" title="Trust Center">Trust Center</a>
  				</li>
  			</ul>
  			<ul class="grid_2">
  				<li>
  					<strong>Partners</strong>
  					<a href="partners/getsatisfaction" title="Get Satisfaction">Get Satisfaction</a>
  				</li>
  				<li>
  					<a href="partners/olark" title="Olark live chat">Olark live chat</a>
  				</li>
  				<li>
  					<a href="partners/google" title="Google">Google&trade;</a>
  				</li>
  				<li>
  					<a href="partners/salesforce" title="Sales Force">Salesforce&trade;</a>
  				</li>
  				<li>
  					<a href="partners/metaverse" title="Metaverse">Metaverse</a>
  				</li>
  				<li>
  					<a href="partners/livechat" title="LiveChat">LiveChat</a>
  				</li>
  				<!--<li>
  					<a href="/partners/brandbacon" title="Brand Bacon">Brand Bacon</a>
  				</li>-->
  				<li>
  					<a href="partners/snapengage" title="SnapEngage">SnapEngage</a>
  				</li>
  			</ul>
  			<ul class="grid_2">
  				<li>
  					<strong><a href="blog">Blog</a></strong>
  					<a href="blog" title="Recent Customer Support Articles">Recent Articles</a>
  				</li>
  				<li>
  					<a href="blog/product-updates/" title="updates and status">Updates and Status</a>
  				</li>
  				<li>
  					<a href="http://feeds.feedburner.com/deskdotcom" title="Subscribe">Subscribe</a>
  				</li>
  			</ul>
  			<ul class="grid_2">
  				<li>
  					<strong><a href="contact" title="contact">Get In Touch</a></strong>
  					<a href="contact" title="contact">Contact Us</a>
  				</li>
  				<li>
  					<script type="text/javascript">generateEmailLink("info");</script>
  				</li>
  				<li>
  					<script type="text/javascript">generateEmailLink("sales");</script>
  				</li>
  				<li>
  					<script type="text/javascript">generateEmailLink("support");</script>
  				</li>
  				<li>
  					<script type="text/javascript">generateEmailLink("partnerships");</script>
  				</li>
  			</ul>
  		</div>
  		<div class="clearfix">
  			<div class="grid_8 phone">
  				<strong>1-877-226-9212</strong>
  				&copy;2012  <a href="http://salesforce.com/" target="_blank">salesforce.com</a>, inc.  All rights reserved.   <a href="terms" title="Terms of Use">Terms</a> &amp; <a href="privacy" title="Privacy Policy">Privacy</a>.
  			</div>
  			<div class="grid_4 icons" id="socialIcons">
  			 <div id="partofsalesforce">
  			   <div class="sflogo"><a href="http://salesforce.com/" target="_blank">A Salesforce company</a></div>
  			 </div>
  				<a href="http://feeds.feedburner.com/deskdotcom" class="rss">RSS</a>
  				<a href="http://www.linkedin.com/company/desk" class="linkedin">LinkedIn</a>
  				<a href="http://www.youtube.com/user/desk" class="youtube">YouTube</a>
  				<a href="http://www.facebook.com/desk" class="facebook">Facebook</a>
  				<a href="http://www.twitter.com/desk" class="twitter">Twitter</a>
  			</div>
  		</div>
  	</div>
  </footer>

  <!-- Force tracking -->
  <script type="text/javascript">setTimeout(function(){var a=document.createElement("script");var b=document.getElementsByTagName('script')[0];a.src=document.location.protocol+"//dnn506yrbagrg.cloudfront.net/pages/scripts/0011/5385.js";a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)},1);</script>
  <!-- Start of HubSpot Logging Code  -->
  <script type="text/javascript" language="javascript">var hs_portalid=114372;var hs_salog_version="2.00";var hs_ppa="assistly.app10.hubspot.com";document.write(unescape("%3Cscript src='"+document.location.protocol+"//"+hs_ppa+"/salog.js.aspx' type='text/javascript'%3E%3C/script%3E"));</script>
  <!-- End of HubSpot Logging Code -->

  <!-- Genius tracking code -->
  <script language='JavaScript' type='text/javascript'>if(self==top){document.write("<scr"+"ipt type='text/javascript' language='JavaScript' id='GeniusCode' src='"+location.protocol+'//cgdfi.rsvpgenius.com/mgTrack1.js?mgcid=105fm2Y'+"'><\/scr"+"ipt>");}</script>
  		<!-- Tracking tags -->
  		<img src="http://altfarm.mediaplex.com/ad/bk/18229-152075-3840-0?Desk_Homepage=1&amp;mpuid=" height="1" width="1" alt="Mediaplex_tag" style="position: absolute; top: 0; left: 0; display: block;"/>
  	</body>
  </html>
HTML

NEW_AUTO_LINK_RE = /(
  (?<scheme>
    \b
      (?> https? | mailto | [st]?ftp | aaas? | about | a?cap | cid | crid | data | dav | dict | dns | fax | file | geo | gopher | go | h323 | iax | icap | im | imap | info | ipp | iris | ldap | msrps? | news | nfs | nntp | pop | rsync | rtsp | sips? | sms | snmp | tag | telnet | tel | tip | tv | urn | uuid | view\-source | wss? | xmpp | aim | apt | afp | bitcoin | bolo | callto | chrome | content | cvs | doi | facetime | feed | finger | fish | git | gg | gizmoproject | gtalk | irc[s6]? | itms | jar | javascript | lastfm | ldaps | magnet | maps | market | message | mms | msnim | mumble | mvn | notes | palm | paparazzi | platform | proxy | psyc | query | rmi | rtmp | secondlife | sgn | skype | spotify | ssh | smb | soldat | steam | svn | teamspeak | things | udp | unreal | ventrilo | webcal | wtai | wyciwyg | xfire | xri | ymsgr)
    \b
    \:
  ){0}
  (?<scheme_separator>
    \/{0,3}
  ){0}
  (?<scheme_prefix>
    \g<scheme>
    \g<scheme_separator>
  ){0}
  (?<tld>
    \b
      (?> COM | ORG | EDU | GOV | UK | NET | CA | DE | JP | FR | AERO | ARPA | ASIA | A[UCDEFGILMNOQRSTWXZ] | US | RU | CH | IT | NL | SE | NO | ES | MIL | BIZ | B[ABDEFGHIJMNORSTVWYZ] | CAT | COOP | C[CDFGIKLMNORUVWXYZ] | D[JKMOZ] | E[CEGRTU] | F[IJKMO] | G[ABDEFGHILMNPQRSTUWY] | H[KMNRTU] | INFO | INT | I[DELMNOQRS] | JOBS | J[EMO] | K[EGHIMNPRWYZ] | L[ABCIKRSTUVY] | MOBI | MUSEUM | M[ACDEGHKLMNOPQRSTUVWXYZ] | NAME | N[ACEFGIPRUZ] | OM | PRO | P[AEFGHKLMNRSTWY] | QA | R[EOSW] | S[ABCDGHIJKLMNORTUVXYZ] | TRAVEL | TEL | TLD | T[CDFGHJKLMNOPRTVWZ] | U[AGYZ] | VET | V[ACEGINU] | WIKI | W[FS] | XN\-\- (?> 0ZWM56D | 11B5BS3A9AJ6G | 3E0B707E | 45BRJ9C | 80AKHBYKNJ4F | 80AO21A | 90A3AC | 9T4B11YI5A | CLCHC0EA0B2G2A9GCD | DEBA0AD | FIQS8S | FIQZ9S | FPCRJ9C3D | FZC2C9E2C | G6W251D | GECRJ9C | H2BRJ9C | HGBK6AJ7F53BBA | HLCJ6AYA9ESC7A | J6W193G | JXALPDLP | KGBECHTV | KPRW13D | KPRY57D | LGBBAT1AD8J | MGBAAM7A8H | MGBAYH7GPA | MGBBH1A71E | MGBC0A9AZCG | MGBERP4A5D4AR | O3CW4H | OGBPF8FL | P1AI | PGBS0DH | S9BRJ9C | WGBH1C | WGBL6A | XKC2AL3HYE2A | XKC2DL3A5EE0H | YFRO4I67O | YGBI2AMMX | ZCKZAH ) | XXX | Y[ET] | Z[AMW] )
    \b
  ){0}
  (?<ccsld>
    \g<tld>(?= [.]\g<tld>)
  ){0}
  (?<tlds>
    (?: [.]\g<ccsld>)? [.]\g<tld>
  ){0}
  (?<allowed_name>
    # \b(?<!\-)[a-z0-9\-]{1,40}(?!\-)\b
    \b(?>[a-z0-9\-]+)\b
  ){0}
  (?<subdomain_with_implicit_scheme>
    (?> w{2,3}\d{0,3} | mail | proxy | s[fm]tp | pop | ftp | irc | images | news | video )
    (?! \g<tlds> )
  ){0}
  (?<subdomain>
    (?! \g<subdomains_with_implicit_scheme> )
    \g<allowed_name>
    (?! \g<tlds> )
  ){0}
  (?<subdomains_with_implicit_scheme>
    \g<subdomain_with_implicit_scheme>(?: [.]\g<subdomain>){0,3}[.]
  ){0}
  (?<subdomains>
    \g<subdomain>(?: [.]\g<subdomain>){0,3}[.]
  ){0}
  (?<domain>
    \g<allowed_name>
    (?= \g<tlds> )
  ){0}
  (?<port>
    \d{1,5}
  ){0}
  (?<hostname>
    \g<subdomains>? \g<domain> \g<tlds>
  ){0}
  (?<hostname_with_implicit_scheme>
    \g<subdomains_with_implicit_scheme> \g<domain> \g<tlds>
  ){0}
  (?<host>
    \g<hostname>
    (?: \:\g<port>)?
  ){0}
  (?<host_with_implicit_scheme>
    \g<hostname_with_implicit_scheme>
    (?: \:\g<port>)?
  ){0}
  (?<username>
    [\.\-\w]{2,40}
  ){0}
  (?<password>
    [a-z0-9\,\.\<\>\/\;\:\'\"\\\[\]\{\}\|\`\~\!\?\@\#\$\%\^\&\*\(\)\-\=\_\+]{1,50}
  ){0}
  (?<userinfo>
    (?> \g<username>(?: \: \g<password> )? \@ )
  ){0}
  (?<authority>
    \g<userinfo>? \g<host>
  ){0}
  (?<authority_with_implicit_scheme>
    \g<userinfo>? \g<host_with_implicit_scheme>
  ){0}
  (?<hex>
    [0-9a-f]
  ){0}
  (?<disallowed_encoded>
    \%[01][0-9A-F]
  ){0}
  (?<hex_encoded>
    (?! \g<disallowed_encoded> )
    \%\g<hex>{2}
  ){0}
  (?<html_entity>
    \& (?> \#[0-9]{1,4} | \#x\g<hex>{1,4} | [a-z]{2,8} )\;
  ){0}
  (?<path_segment_char>
    (?> [a-z0-9\-\_\$\.\+\*\'\(\)\,\=\:\;\~\@] | \#(?=\w) | \g<hex_encoded> | \g<html_entity> )
  ){0}
  (?<path_segment>
    \g<path_segment_char>{1,200}
  ){0}
  (?<path>
    (?: \/ \g<path_segment>? ){1,10} \#?
  ){0}
  (?<fragment>
    \# \g<path_segment>
  ){0}
  (?<querystring_name>
    \g<path_segment> (?: \[\g<path_segment>\] )?
  ){0}
  (?<querystring_value>
    (?> \g<URI> | \g<path_segment> )
  ){0}
  (?<name_value_pair>
    \g<querystring_name>=\g<querystring_value>
  ){0}
  (?<name_value_pairs>
    \g<name_value_pair> (?: \& \g<name_value_pair>){0,20}
  ){0}
  (?<query>
    [\?\!\&] \g<name_value_pairs>
  ){0}
  (?<locator>
    \g<path>? \g<query>? \g<fragment>?
  ){0}
  (?<URI>
    (?>
      \g<scheme_prefix> \g<authority>
    |
      \g<scheme_prefix>? \g<authority_with_implicit_scheme>
    )
    \g<locator>
  ){0}

  (\g<URI>)
)/uixm

links = input.scan(NEW_AUTO_LINK_RE).flatten.select{|h| h =~ NEW_AUTO_LINK_RE && h.match(/webassets/)}

require 'iconv'

links.each do |l|
  content = `curl -I #{l} 2>&1`
  ic = Iconv.new('UTF-8//IGNORE', 'UTF-8')
  content = ic.iconv(content + ' ')[0..-2]
  headers_array = content.split("\n")
  headers = headers_array.join("\n")
  puts "link: #{l}"
  puts headers
end

